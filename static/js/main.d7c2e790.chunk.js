(this.webpackJsonpms_movie_site=this.webpackJsonpms_movie_site||[]).push([[0],{23:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var a=n(2),i=n.n(a),o=n(16),c=n.n(o),r=n(10),s=n(11),l=n(6),u=n(14),d=n(12),m=n(7),h=n(3),v=n(4),j=(n(23),n(1));var _=function(e){var t="https://image.tmdb.org/t/p/w154/".concat(e.movie.poster_path);return Object(j.jsx)(m.b,{style:{textDecoration:"none"},onClick:function(){0!=e.origin&&window.location.reload()},to:"/movie",state:{movieId:e.movie.id},children:Object(j.jsxs)("div",{className:"movie__instance__container",children:[Object(j.jsxs)("div",{className:"movie__image__container",children:[Object(j.jsx)("img",{src:t,alt:"",className:"movie__img"}),Object(j.jsx)("div",{style:e.movie.vote_average>=6?{background:"chartreuse"}:{background:"red"},className:"movie__rating__container",children:e.movie.vote_average})]}),Object(j.jsxs)("div",{className:"movie__text__container",children:[Object(j.jsx)("p",{style:{textDecoration:"none"},className:"title",children:e.movie.title}),Object(j.jsx)("p",{className:"year",children:e.movie.release_date.substring(0,4)}),void 0!==e.genres?e.genres.map((function(e,t){return Object(j.jsxs)("span",{children:[e," "]},t)})):null]})]})})},b=n(17);n(25);var g=function(e){var t=Object(a.useState)(""),n=Object(v.a)(t,2),i=n[0],o=n[1],c=Object(a.useRef)(null),r=Object(a.useRef)(null),s=Object(a.useState)([]),l=Object(v.a)(s,2),u=l[0],d=l[1],g=[],f=Object(h.e)(),p=!0;return console.log(f.pathname),"/favourites"!==f.pathname&&"/visited"!==f.pathname&&"/"!==f.pathname||(p=!1),Object(a.useEffect)((function(){""!=i?e.getData("search/multi","&language=en-US&query=".concat(i,"&page=1&include_adult=false")).then((function(e){return e.json()})).then((function(e){return Array.from(e.results)})).then((function(t){return t.map((function(t){return e.getData("movie/".concat(t.id),"&language=en-US").then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){}))}))})).then((function(t){t.map((function(t){t.then((function(t){void 0!==t&&g.push(t);var n=g.map((function(t,n){if(n<8){var a=t.id+1e7;return console.log(p),Object(j.jsx)(_,{origin:p,getData:e.getData,movie:t},a)}}));d(n)}))}))})).catch((function(e){})):d([])}),[i]),Object(j.jsx)("section",{children:Object(j.jsx)("main",{className:"nav__bar__main",children:Object(j.jsxs)("div",{className:"nav__bar__container",children:[Object(j.jsx)(m.b,{className:"home__button",to:"/",children:"Home"}),Object(j.jsx)("div",{className:"nav__bar__container__left",children:Object(j.jsxs)("div",{className:"search__bar__container",children:[Object(j.jsx)(b.a,{className:"search__bar__icon"}),Object(j.jsx)("input",{ref:c,value:i,onKeyDown:function(e){"Enter"===e.key?r.current.style.display="none":r.current.style.display="flex"},onClick:function(){r.current.style.display="flex"},onChange:function(){g=[],o(c.current.value)},type:"text",className:"search__bar__input"}),Object(j.jsx)("main",{onClick:function(){r.current.style.display="none"},ref:r,className:"search__results__main",children:u})]})}),Object(j.jsxs)("div",{className:"nav__bar__container__right",children:[Object(j.jsx)(m.b,{className:"nav__bar__container__right__link",to:"/favourites",children:"Favourites"}),Object(j.jsx)("h3",{className:"nav__bar__container__right__decor",children:"|"}),Object(j.jsx)(m.b,{className:"nav__bar__container__right__link",to:"/visited",children:"Visited"})]})]})})})},f=n(13),p=(n(26),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={display:{popular:[],top_rated:[],upcoming:[]}},a.movies={popular:[],top_rated:[],upcoming:[]},a.movieNumbers={popular:0,top_rated:0,upcoming:0},a.moviesLoaded={popular:!1,top_rated:!1,upcoming:!1},a.currentMovie="popular",a.pageNumberPopular=1,a.pageNumberTopRated=1,a.pageNumberUpcoming=1,a.movieGenres=[],a.handleMovies=a.handleMovies.bind(Object(l.a)(a)),a.handleMovieArray=a.handleMovieArray.bind(Object(l.a)(a)),a.handleMovieMaping=a.handleMovieMaping.bind(Object(l.a)(a)),a.handleSelectorButtons=a.handleSelectorButtons.bind(Object(l.a)(a)),a.popularButton=i.a.createRef(),a.topRatedButton=i.a.createRef(),a.visitedButton=i.a.createRef(),a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.handleMovies("popular",12),this.handleSelectorButtons(this.popularButton)}},{key:"handleMovieArray",value:function(e,t){var n;(n=this.movies[t]).push.apply(n,Object(f.a)(e))}},{key:"handleMovies",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"bottomButton",i=!0;if(this.currentMovie=e,this.currentMovie===e&&"topButton"===a&&!0===this.moviesLoaded[e]?(i=!1,this.handleMovieMaping()):!1===this.moviesLoaded[e]&&(this.moviesLoaded[e]=!0),i){var o=0;o=0!==this.movieNumbers[e]?this.movieNumbers[e]:12,this.movieNumbers[e]+=t;var c=0;"popular"===e?c=this.pageNumberPopular:"top_rated"===e?c=this.pageNumberTopRated:"upcoming"===e&&(c=this.pageNumberUpcoming),this.movies[e].length-o<12?this.props.getData("movie/".concat(e,"/"),"&page=".concat(c)).then((function(e){return e.json()})).then((function(t){n.handleMovieArray(t.results,e),n.handleMovieMaping(e),"popular"===e?n.pageNumberPopular++:"top_rated"===e?n.pageNumberTopRated++:"upcoming"===e&&n.pageNumberUpcoming++})).catch((function(e){console.log(e)})):this.handleMovieMaping(e)}}},{key:"handleMovieMaping",value:function(){var e=this,t=0,n=0xc6f040993d24,a=this.state.display;this.props.getData("genre/movie/list").then((function(e){return e.json()})).then((function(i){a[e.currentMovie]=e.movies[e.currentMovie].map((function(a,o){if(t=a.id,680===a.id&&(t=n,n++),o<e.movieNumbers[e.currentMovie]){var c=[];return a.genre_ids.forEach((function(e){i.genres.forEach((function(t){t.id===e&&c.push(t.name)}))})),Object(j.jsx)(_,{getData:e.props.getData,movie:a,genres:c,origin:!1},t)}})),e.setState({display:a})}))}},{key:"handleSelectorButtons",value:function(e){this.popularButton.current.style.textDecoration="none",this.topRatedButton.current.style.textDecoration="none",this.visitedButton.current.style.textDecoration="none",e.current.style.textDecoration="underline"}},{key:"render",value:function(){var e=this;return Object(j.jsx)("main",{className:"landing__page",children:Object(j.jsxs)("div",{className:"landing__page__container",children:[Object(j.jsx)("div",{className:"landing__page__top__container",children:Object(j.jsxs)("ul",{className:"landing__page__navbar",children:[Object(j.jsx)("li",{ref:this.popularButton,onClick:function(){e.handleMovies("popular",12,"topButton"),e.handleSelectorButtons(e.popularButton)},className:"landing__page__navbar__button",children:"Popular"}),Object(j.jsx)("li",{ref:this.topRatedButton,onClick:function(){e.handleMovies("top_rated",12,"topButton"),e.handleSelectorButtons(e.topRatedButton)},className:"landing__page__navbar__button",children:"Top Rated"}),Object(j.jsx)("li",{ref:this.visitedButton,onClick:function(){e.handleMovies("upcoming",12,"topButton"),e.handleSelectorButtons(e.visitedButton)},className:"landing__page__navbar__button",children:"Upcoming"})]})}),Object(j.jsx)("div",{className:"landing__page__movies",children:Object(j.jsx)("div",{className:"landing__page__movies__container",children:this.state.display[this.currentMovie]})}),Object(j.jsx)("div",{className:"landing__page__button__container",children:Object(j.jsx)("button",{onClick:function(){e.handleMovies(e.currentMovie,12)},className:"landing__page__button",children:"LOAD MORE"})})]})})}}]),n}(a.Component)),O=p,x=(n(27),n(18)),N=n.p+"static/media/heart.92706a5b.svg";var w=function(e){var t=Object(h.e)().state.movieId,n=Object(a.useState)([]),i=Object(v.a)(n,2),o=i[0],c=i[1],r=Object(a.useState)({}),s=Object(v.a)(r,2),l=s[0],u=s[1],d=Object(a.useState)([]),m=Object(v.a)(d,2),b=m[0],g=m[1],p=Object(a.useState)([]),O=Object(v.a)(p,2),w=O[0],y=O[1],S=Object(a.useState)([]),D=Object(v.a)(S,2),M=D[0],k=D[1],F=Object(a.useRef)(null),B=Object(a.useState)(!1),G=Object(v.a)(B,2),I=G[0],C=G[1];function E(e,t){var n=null,a=null,i=[];null!==window.localStorage.getItem(t)?(n=JSON.parse(window.localStorage.getItem(t)),i=Array.from(n),a=[].concat(Object(f.a)(i),[e])):a=[e],i.includes(e)||window.localStorage.setItem(t,JSON.stringify(a))}return Object(a.useEffect)((function(){var n=null;e.getData("movie/".concat(t)).then((function(e){return e.json()})).then((function(t){return n=t,u(t),function(e){for(var t=2,n=Math.round(e/t),a=[],i=0;i<n;i++)a.push(i);c(a)}(n.vote_average),e.getData("movie/".concat(t.id,"/recommendations"))})).then((function(e){return e.json()})).then((function(t){return g(t.results),e.getData("movie/".concat(n.id,"/similar"))})).then((function(e){return e.json()})).then((function(t){return y(t.results),e.getData("movie/".concat(n.id),"&append_to_response=credits")})).then((function(e){return e.json()})).then((function(e){for(var a=[],i=0;i<4;i++)a.push("".concat(e.credits.cast[i].name,", "));k(a),E(n.id,"visited"),function(){if(null!==window.localStorage.getItem("favourites")){var e=JSON.parse(window.localStorage.getItem("favourites"));Array.from(e).includes(t)&&(C(!0),F.current.style.background="red")}}()})).catch((function(e){console.log(e)}))}),[]),Object(j.jsxs)("div",{className:"main__movie__container",children:[Object(j.jsxs)("div",{className:"top__part",children:[Object(j.jsx)("div",{className:"backposter__container",children:Object(j.jsx)("img",{src:"https://image.tmdb.org/t/p/original/".concat(l.backdrop_path),alt:""})}),Object(j.jsxs)("div",{className:"info__container",children:[Object(j.jsx)("div",{className:"image__container",children:Object(j.jsxs)("div",{className:"under__poster__container",children:[Object(j.jsxs)("div",{className:"poster__image",children:[Object(j.jsx)("img",{src:"https://image.tmdb.org/t/p/w500/".concat(l.poster_path),alt:"",className:"poster__img"}),Object(j.jsxs)("h3",{className:"runtime",children:[l.runtime," min"]})]}),Object(j.jsx)("div",{className:"stars",children:Object(j.jsxs)("div",{className:"rating__container",children:[Object(j.jsx)("div",{className:"inside__stars",children:o.map((function(e){return Object(j.jsx)(x.a,{style:{color:"yellow"},className:"star"})}))}),Object(j.jsx)("div",{className:"imdb__rating",children:Object(j.jsx)("a",{target:"_blank",href:"https://www.imdb.com/title/".concat(l.imdb_id,"/"),children:"IMDB"})})]})}),Object(j.jsx)("div",{className:"add__to__favorites",children:Object(j.jsx)("img",{ref:F,onClick:function(){I?(F.current.style.background="black",e.removeFromFavourites(t),C(!1)):(F.current.style.background="red",E(l.id,"favourites"),C(!0))},src:N,alt:""})})]})}),Object(j.jsxs)("div",{className:"text__info__container",children:[Object(j.jsxs)("div",{className:"title__container",children:[Object(j.jsx)("h3",{className:"title",children:l.title}),Object(j.jsx)("p",{className:"text",children:l.overview})]}),Object(j.jsxs)("div",{className:"credits__container",children:[Object(j.jsx)("h3",{className:"title",children:"Credits"}),Object(j.jsx)("p",{className:"text",children:M})]})]})]})]}),Object(j.jsxs)("div",{className:"bottom__part",children:[Object(j.jsx)("h1",{className:"bottom__part__text",children:"RECOMENDED"}),Object(j.jsx)("div",{className:"recomended__container",children:b.map((function(t,n){if(n<6){var a=[];return e.getGenres(t).then((function(e){a=e})),Object(j.jsx)("div",{className:"recomended",children:Object(j.jsx)(_,{origin:!0,getData:e.getData,movie:t,genres:a},t.id)})}}))}),Object(j.jsx)("h1",{className:"bottom__part__text",children:"SIMILAR"}),Object(j.jsx)("div",{className:"similar__container",children:w.map((function(t,n){if(n<6){var a=[];return e.getGenres(t).then((function(e){a=e})),Object(j.jsx)("div",{className:"similar",children:Object(j.jsx)(_,{origin:!0,getData:e.getData,movie:t,genres:a},t.id)})}}))})]})]})};n(28);var y=function(e){var t=[],n=Object(a.useState)([]),i=Object(v.a)(n,2),o=i[0],c=i[1],r=Object(h.e)();return window.localStorage.setItem("sessionF",null),"null"===window.localStorage.getItem("sessionV")&&(window.location.reload(),window.localStorage.setItem("sessionV",1)),Object(a.useEffect)((function(){try{t=Array.from(JSON.parse(window.localStorage.getItem("visited")))}catch(a){return}var n=[];t.forEach((function(a,i){e.getData("movie/".concat(a)).then((function(e){return e.json()})).then((function(a){n.push(a),t.length-1===i&&function(t){var n=[],a=new Promise((function(a,i){t.map((function(i,o){e.getGenres(i).then((function(e){n.push(e),t.length-1===o&&a("ok")}))}))}));a.then((function(){c(t.map((function(t,a){return Object(j.jsx)("div",{className:"one__movie__container",children:Object(j.jsx)(_,{origin:!1,getData:e.getData,movie:t,genres:n[a]},t.id)})})))})).catch((function(e){console.log(e)}))}(n)})).catch((function(e){console.log(e)}))}))}),[r.key]),Object(j.jsxs)("main",{className:"favourites__container",children:[Object(j.jsxs)("div",{className:"favourits__text",children:[Object(j.jsx)("h1",{className:"title",children:"Visited"}),Object(j.jsx)("button",{onClick:function(){e.clearMoviesFromStorage("visited"),window.location.reload()},className:"clear__favourites",children:"Clear Visited"})]}),Object(j.jsx)("div",{className:"movies__container",children:o})]})};n(29);var S=function(e){var t=[],n=Object(a.useState)([]),i=Object(v.a)(n,2),o=i[0],c=i[1],r=Object(h.e)();return window.localStorage.setItem("sessionV",null),"null"===window.localStorage.getItem("sessionF")&&(window.location.reload(),window.localStorage.setItem("sessionF",1)),Object(a.useEffect)((function(){try{t=Array.from(JSON.parse(window.localStorage.getItem("favourites")))}catch(a){return void console.log(a)}var n=[];t.forEach((function(a,i){e.getData("movie/".concat(a)).then((function(e){return e.json()})).then((function(a){n.push(a),t.length-1===i&&function(t){var n=[],a=new Promise((function(a,i){t.map((function(i,o){e.getGenres(i).then((function(e){n.push(e),t.length-1===o&&a("ok")}))}))}));a.then((function(){c(t.map((function(t,a){return Object(j.jsxs)("div",{className:"one__movie__container",children:[Object(j.jsx)("button",{title:"Remove from favourites",onClick:function(){e.removeFromFavourites(t.id),window.location.reload()},className:"remove__from__favourites__button",children:"X"}),Object(j.jsx)(_,{origin:!1,getData:e.getData,movie:t,genres:n[a]},t.id)]})})))})).catch((function(e){console.log(e)}))}(n)})).catch((function(e){console.log(e)}))}))}),[r.key]),Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("main",{className:"favourites__container",children:[Object(j.jsxs)("div",{className:"favourits__text",children:[Object(j.jsx)("h1",{className:"title",children:"Favourites"}),Object(j.jsx)("button",{onClick:function(){e.clearMoviesFromStorage("favourites"),window.location.reload()},className:"clear__favourites",children:"Clear Favourites"})]}),Object(j.jsx)("div",{className:"movies__container",children:o})]})})},D=(n(30),"e0d512f22b5823229e6f8aba260e1c20"),M="https://api.themoviedb.org/3/",k=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).getData=e.getData.bind(Object(l.a)(e)),e.handleGettingGenres=e.handleGettingGenres.bind(Object(l.a)(e)),e.removeFromFavourites=e.removeFromFavourites.bind(Object(l.a)(e)),e.clearMoviesFromStorage=e.clearMoviesFromStorage.bind(Object(l.a)(e)),e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){}},{key:"getData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";function n(){return"".concat(M).concat(e,"?api_key=").concat(D).concat(t)}return fetch(n()).then((function(e){if(200===e.status)return e;throw new Error("invalid Url")})).catch((function(e){console.log(e)}))}},{key:"handleGettingGenres",value:function(e){return this.getData("genre/movie/list").then((function(e){return e.json()})).then((function(t){var n=[];return void 0===e.genre_ids?e.genres.forEach((function(e){n.push(e.name.toString())})):e.genre_ids.forEach((function(e){t.genres.forEach((function(t){t.id===e&&n.push(t.name)}))})),n}))}},{key:"removeFromFavourites",value:function(e){if(null!==window.localStorage.getItem("favourites")){var t=JSON.parse(window.localStorage.getItem("favourites")),n=Array.from(t).filter((function(t){if(e!=t)return t}));window.localStorage.setItem("favourites",JSON.stringify(n))}}},{key:"clearMoviesFromStorage",value:function(e){window.localStorage.removeItem(e)}},{key:"render",value:function(){return Object(j.jsxs)(m.a,{children:[Object(j.jsx)(g,{getData:this.getData,getGenres:this.handleGettingGenres}),Object(j.jsxs)(h.c,{children:[Object(j.jsx)(h.a,{path:"/",exact:!0,element:Object(j.jsx)(O,{getData:this.getData})}),Object(j.jsx)(h.a,{path:"/movie",element:Object(j.jsx)(w,{getData:this.getData,getGenres:this.handleGettingGenres,removeFromFavourites:this.removeFromFavourites})}),Object(j.jsx)(h.a,{path:"/visited",element:Object(j.jsx)(y,{getData:this.getData,getGenres:this.handleGettingGenres,clearMoviesFromStorage:this.clearMoviesFromStorage})}),Object(j.jsx)(h.a,{path:"/favourites",element:Object(j.jsx)(S,{getData:this.getData,getGenres:this.handleGettingGenres,removeFromFavourites:this.removeFromFavourites,clearMoviesFromStorage:this.clearMoviesFromStorage})})]})]})}}]),n}(a.Component),F=k;c.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(F,{})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.d7c2e790.chunk.js.map